{% extends "base.html" %}
{% block content %}
    <h1>Waiting for other players to join</h1>
    <p> Hello {{ current_player.nickname }}</p>
    <h2>Game code: {{ game_code }}</h2>
    <h2>Other players:</h2>
    <div>
    <ul>
        {% for player in players %}
        <li>{{ player.nickname }} - {{ player.monster }}</li>
        {% endfor %}
    </ul>
    </div>
    <p>Once all players will join, the game creator can start the game, by pressing "Start"</p>

    {% if current_player.id == players.0.id %}
        <button  id="gameplay">
            <a href="{% url 'gameplay' game_code=game_code %}">Start</a>
        </button>
    {% endif %}

     <script>
        setTimeout(() => {
            window.location.reload(); //serwer przy każdym żądaniu sprawdza status gry. Jeśli status zmienił się na playing, widok wait_for_game automatycznie przekierowuje gracza do widoku gameplay
        }, 3000); // Odświeżanie co 3 sekundy
    </script>


{% endblock content %}